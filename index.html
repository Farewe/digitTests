<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tests for Detecting Irregular Digit Patterns • digitTests</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Tests for Detecting Irregular Digit Patterns">
<meta property="og:description" content="Provides statistical tests for detecting irregular patterns in data. The package includes tools for extracting digits at various locations in a set of numbers, tests for repeated digit patterns, and (Bayesian) tests of Benford's law or any other digit distribution.">
<meta property="og:image" content="/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">digitTests</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/koenderks/digitTests/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">


<div id="digittests-tests-for-detecting-irregular-digit-patterns" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#digittests-tests-for-detecting-irregular-digit-patterns" class="anchor"></a>digitTests: Tests for Detecting Irregular Digit Patterns</h1></div>
<p><img src="https://github.com/koenderks/digitTests/raw/master/man/figures/logo.png" width="149" height="173" alt="logo" align="right" margin-left="20" margin-right="20"></p>
<p><code>digitTests</code> is an R package providing statistical tests for detecting irregular digit patterns. Such irregular digit patterns can be an indication of potential data manipulation or fraud. Therefore, the type of tests that the package provides can be useful in (but not limited to) the field of auditing to assess whether data have potentially been tampered with. However, please note that real data will never be perfect, and therefore caution should be used when relying on the statistical decision metrics that the package provides.</p>
<p>The package is also implemented with a graphical user interface in the Audit module of <a href="https://jasp-stats.org">JASP</a>, a free and open-source statistical software program.</p>
<div id="overview" class="section level2">
<h2 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h2>
<p>For complete documentation of the <code>digitTests</code> package download the <a href="https://cran.r-project.org/package=digitTests/digitTests.pdf">package manual</a>.</p>
<ol>
<li><a href="#1-installation">Installation</a></li>
<li><a href="#2-benchmarks">Benchmarks</a></li>
<li><a href="#3-intended-usage">Intended usage</a></li>
<li><a href="#4-references">References</a></li>
</ol>
</div>
<div id="1-installation" class="section level2">
<h2 class="hasAnchor">
<a href="#1-installation" class="anchor"></a>1. Installation</h2>
<p>The most recently released version of <code>digitTests</code> can be downloaded from <a href="https://cran.r-project.org/package=digitTests">CRAN</a> by running the following command in R:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">'digitTests'</span><span class="op">)</span></code></pre></div>
<p>Alternatively, you can download the development version from GitHub using:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">'koenderks/digitTests'</span><span class="op">)</span></code></pre></div>
<p>After installation, the package can be loaded with:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">digitTests</span><span class="op">)</span></code></pre></div>
</div>
<div id="2-benchmarks" class="section level2">
<h2 class="hasAnchor">
<a href="#2-benchmarks" class="anchor"></a>2. Benchmarks</h2>
<p>To validate the statistical results, <code>digitTests</code>’s automated <a href="https://github.com/koenderks/digitTests/tree/master/tests/testthat">unit tests</a> regularly verify the main output from the package against the following benchmark(s):</p>
<ul>
<li>
<a href="https://cran.r-project.org/package=benford.analysis">benford.analysis</a> (R package version 0.1.5)</li>
</ul>
</div>
<div id="3-intended-usage" class="section level2">
<h2 class="hasAnchor">
<a href="#3-intended-usage" class="anchor"></a>3. Intended usage</h2>
<div id="function-extract_digits" class="section level3">
<h3 class="hasAnchor">
<a href="#function-extract_digits" class="anchor"></a>Function: <code>extract_digits()</code>
</h3>
<p>The workhorse of the package is the <code><a href="reference/extract_digits.html">extract_digits()</a></code> function. This function takes a vector of numbers and returns the requested digits (with or without including <code>0</code>’s).</p>
<p><em>Full function with default arguments:</em></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/extract_digits.html">extract_digits</a></span><span class="op">(</span><span class="va">x</span>, check <span class="op">=</span> <span class="st">'first'</span>, include.zero <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<p><em>Supported options for the <code>check</code> argument:</em></p>
<table class="table">
<thead><tr class="header">
<th align="left"><code>check</code></th>
<th align="left">Returns</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"><code>fist</code></td>
<td align="left">First digit</td>
</tr>
<tr class="even">
<td align="left"><code>firsttwo</code></td>
<td align="left">First and second digit</td>
</tr>
<tr class="odd">
<td align="left"><code>before</code></td>
<td align="left">All digits before the decimal separator (<code>.</code>)</td>
</tr>
<tr class="even">
<td align="left"><code>after</code></td>
<td align="left">All digits after the decimal separator (<code>.</code>)</td>
</tr>
<tr class="odd">
<td align="left"><code>lasttwo</code></td>
<td align="left">Last two digits</td>
</tr>
<tr class="even">
<td align="left"><code>last</code></td>
<td align="left">Last digit</td>
</tr>
</tbody>
</table>
<p><em>Example:</em></p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.00</span>, <span class="fl">0.20</span>, <span class="fl">1.23</span>, <span class="fl">40.00</span>, <span class="fl">54.04</span><span class="op">)</span>
<span class="fu"><a href="reference/extract_digits.html">extract_digits</a></span><span class="op">(</span><span class="va">x</span>, check <span class="op">=</span> <span class="st">'first'</span>, include.zero <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="co"># [1] NA  2  1  4  5</span></code></pre></div>
</div>
<div id="functions-distrtest--distrbtest" class="section level3">
<h3 class="hasAnchor">
<a href="#functions-distrtest--distrbtest" class="anchor"></a>Functions: <code>distr.test()</code> &amp; <code>distr.btest()</code>
</h3>
<p>The functions <code><a href="reference/distr.test.html">distr.test()</a></code> and <code><a href="reference/distr.btest.html">distr.btest()</a></code> take a vector of numeric values, extract the requested digits, and compares the frequencies of these digits to a reference distribution. The function <code><a href="reference/distr.test.html">distr.test()</a></code> performs a frequentist hypothesis test of the null hypothesis that the digits are distributed according to the reference distribution and produces a <em>p</em> value. The function <code><a href="reference/distr.btest.html">distr.btest()</a></code> performs a Bayesian hypothesis test of the null hypothesis that the digits are distributed according to the reference distribution against the alternative hypothesis (using the prior parameters specified in <code>alpha</code>) that the digits are not distributed according to the reference distribution and produces a Bayes factor (Kass &amp; Raftery, 1995). The possible options for the <code>check</code> argument are taken over from <code><a href="reference/extract_digits.html">extract_digits()</a></code>.</p>
<p><em>Full function with default arguments:</em></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/distr.test.html">distr.test</a></span><span class="op">(</span><span class="va">x</span>, check <span class="op">=</span> <span class="st">'first'</span>, reference <span class="op">=</span> <span class="st">'benford'</span><span class="op">)</span>
<span class="fu"><a href="reference/distr.btest.html">distr.btest</a></span><span class="op">(</span><span class="va">x</span>, check <span class="op">=</span> <span class="st">'first'</span>, reference <span class="op">=</span> <span class="st">'benford'</span>, alpha <span class="op">=</span> <span class="cn">NULL</span>, BF10 <span class="op">=</span> <span class="cn">TRUE</span>, log <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<p><em>Supported options for the <code>reference</code> argument:</em></p>
<table class="table">
<thead><tr class="header">
<th align="left"><code>check</code></th>
<th align="left">Returns</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"><code>benford</code></td>
<td align="left">Benford’s law</td>
</tr>
<tr class="even">
<td align="left"><code>firsttwo</code></td>
<td align="left">Uniform distribution</td>
</tr>
<tr class="odd">
<td align="left">Vector of probabilities</td>
<td align="left">Custom distribution</td>
</tr>
</tbody>
</table>
<p><em>Example:</em></p>
<p>Benford’s law (Benford, 1938) is a principle that describes a pattern in many naturally-occurring numbers. According to Benford’s law, each possible leading digit <em>d</em> in a naturally occuring, or non-manipulated, set of numbers occurs with a probability:</p>
<p><img src="https://latex.codecogs.com/svg.image?p(d_i)&amp;space;=&amp;space;%5Ctext%7Blog%7D_%7B10%7D(1&amp;space;+&amp;space;%5Cfrac%7B1%7D%7Bd_i%7D)" title="p(d_i) = \text{log}_{10}(\frac{1}{d_i})"></p>
<p>The distribution of leading digits in a data set of financial transaction values (e.g., the <code>sinoForest</code> data) can be extracted and tested against the expected frequencies under Benford’s law using the code below.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Frequentist hypothesis test</span>
<span class="fu"><a href="reference/distr.test.html">distr.test</a></span><span class="op">(</span><span class="va">sinoForest</span><span class="op">$</span><span class="va">value</span>, check <span class="op">=</span> <span class="st">'first'</span>, reference <span class="op">=</span> <span class="st">'benford'</span><span class="op">)</span>

<span class="co">#</span>
<span class="co">#   Digit distribution test</span>
<span class="co">#</span>
<span class="co"># data:  sinoForest$value</span>
<span class="co"># n = 772, X-squared = 7.6517, df = 8, p-value = 0.4682</span>
<span class="co"># alternative hypothesis: leading digit(s) are not distributed according to the benford distribution.</span>

<span class="co"># Bayesian hypothesis test using default prior</span>
<span class="fu"><a href="reference/distr.btest.html">distr.btest</a></span><span class="op">(</span><span class="va">sinoForest</span><span class="op">$</span><span class="va">value</span>, check <span class="op">=</span> <span class="st">'first'</span>, reference <span class="op">=</span> <span class="st">'benford'</span>, BF10 <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>

<span class="co">#</span>
<span class="co">#   Digit distribution test</span>
<span class="co">#</span>
<span class="co"># data:  sinoForest$value</span>
<span class="co"># n = 772, BF01 = 6899678</span>
<span class="co"># alternative hypothesis: leading digit(s) are not distributed according to the benford distribution.</span></code></pre></div>
</div>
<div id="function-rvtest" class="section level3">
<h3 class="hasAnchor">
<a href="#function-rvtest" class="anchor"></a>Function: <code>rv.test()</code>
</h3>
<p>The function <code><a href="reference/rv.test.html">rv.test()</a></code> analyzes the frequency with which values get repeated within a set of numbers. Unlike Benford’s law, and its generalizations, this approach examines the entire number at once, not only the first or last digit. For the technical details of this procedure, see Simohnsohn (2019). The possible options for the <code>check</code> argument are taken over from <code><a href="reference/extract_digits.html">extract_digits()</a></code>.</p>
<p><em>Full function with default arguments:</em></p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/rv.test.html">rv.test</a></span><span class="op">(</span><span class="va">x</span>, check <span class="op">=</span> <span class="st">'last'</span>, method <span class="op">=</span> <span class="st">'af'</span>, samples <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span></code></pre></div>
<p><em>Supported options for the <code>method</code> argument:</em></p>
<table class="table">
<thead><tr class="header">
<th align="left"><code>check</code></th>
<th align="left">Returns</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"><code>af</code></td>
<td align="left">Average frequency</td>
</tr>
<tr class="even">
<td align="left"><code>entropy</code></td>
<td align="left">Entropy</td>
</tr>
</tbody>
</table>
<p><em>Example:</em></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/rv.test.html">rv.test</a></span><span class="op">(</span><span class="va">sanitizer</span><span class="op">$</span><span class="va">value</span>, check <span class="op">=</span> <span class="st">'lasttwo'</span><span class="op">)</span>

<span class="co">#</span>
<span class="co">#   Repeated values test</span>
<span class="co">#</span>
<span class="co"># data:  sanitizer$value</span>
<span class="co"># n = 1600, AF = 1.5225, p-value = 0.001</span>
<span class="co"># alternative hypothesis: data contain an excessive amount of repeated values.</span></code></pre></div>
</div>
</div>
<div id="4-references" class="section level2">
<h2 class="hasAnchor">
<a href="#4-references" class="anchor"></a>4. References</h2>
<ul>
<li>Benford, F. (1938). The law of anomalous numbers. In <em>Proceedings of the American Philosophical Society</em>, 551-572.</li>
<li>Kass, R. E., &amp; Raftery, A. E. (1995). Bayes factors. <em>Journal of the American Statistical Association</em>, <em>90</em>(430), 773-795.</li>
<li>Simohnsohn, U. (2019, May 25). <em>Number-Bunching: A New Tool for Forensic Data Analysis</em>. Retrieved from <a href="http://datacolada.org/77">http://datacolada.org/77</a>.</li>
</ul>
</div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/koenderks/digitTests/">https://​github.com/​koenderks/​digitTests/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/koenderks/digitTests/issues">https://​github.com/​koenderks/​digitTests/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></li>
</ul>
</div>
<div class="community">
<h2>Community</h2>
<ul class="list-unstyled">
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>
<div class="citation">
<h2>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html">Citing digitTests</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Koen Derks <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-5533-9349" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://cran.r-project.org/package=digitTests"><img src="https://img.shields.io/cran/v/digitTests?color=yellow&amp;label=CRAN&amp;logo=r" alt="CRAN"></a></li>
<li><a href="https://github.com/koenderks/digitTests/actions"><img src="https://github.com/koenderks/digitTests/workflows/Build/badge.svg" alt="R_build_status"></a></li>
<li><a href="https://codecov.io/gh/koenderks/digitTests"><img src="https://codecov.io/gh/koenderks/digitTests/branch/master/graph/badge.svg?token=ZoxIB8p8PW" alt="Codecov"></a></li>
<li><a href="https://github.com/koenderks/digitTests/issues?q=is%3Aopen+is%3Aissue+label%3Abug"><img src="https://img.shields.io/github/issues/koenderks/digitTests/bug?label=Bugs&amp;logo=github&amp;logoColor=%23FFF&amp;color=brightgreen" alt="Bugs"></a></li>
<li><a href="https://cranlogs.r-pkg.org"><img src="https://cranlogs.r-pkg.org/badges/digitTests?color=blue" alt="Monthly"></a></li>
<li><a href="https://cranlogs.r-pkg.org"><img src="https://cranlogs.r-pkg.org/badges/grand-total/digitTests?color=blue" alt="Total"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Koen Derks.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
